name: Deploy to Somee.com via FTP

on:
  push:
    # Kích hoạt workflow khi có push lên nhánh main
    branches:
      - main
  # Tùy chọn: cho phép chạy workflow thủ công từ giao diện GitHub
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      # 1. Checkout mã nguồn
      - name: Checkout Repository
        uses: actions/checkout@v4

      # 2. (Tùy chọn) Bước Build: Giữ nguyên
      
      # 3. Triển khai qua FTP - SỬ DỤNG ACTION THAY THẾ
      - name: FTP Deploy to Somee.com
        # Thay thế SamKirkland bằng Action khác để khắc phục lỗi không tải được Action
        uses: Wiredcraft/action-ftp-deploy@master 
        with:
          # Các thông số host, user, pw tương tự (tên thông số khác một chút)
          ftp_host: ${{ secrets.FTP_HOST }}
          ftp_user: ${{ secrets.FTP_USER }}
          ftp_password: ${{ secrets.FTP_PW }}
          
          # Thư mục cục bộ để upload (từ GitHub repo)
          local_file_path: ./ 
          
          # Thư mục đích trên Somee.com (Giữ nguyên đường dẫn đã sửa chính xác trước đó)
          remote_file_path: /www.hoangquocdat.somee.com/
